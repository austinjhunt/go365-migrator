<nav class="navbar navbar-expand-lg">
  <a class="navbar-brand text-light" href="{% url 'home' %}">Go365 Migrator</a>
  <button
    class="navbar-toggler"
    type="button"
    data-toggle="collapse"
    data-target="#navbarNav"
    aria-controls="navbarNav"
    aria-expanded="false"
    aria-label="Toggle navigation"
  >
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav ms-auto">
      {% if not user.is_authenticated %}
      <li class="nav-item">
        <a
          href="{% url 'login' %}"
          title="log in if you already have an account"
          class="btn btn-outline-light me-2 nav-link text-light"
          ><i class="fa fa-right-to-bracket"></i> Log In</a
        >
      </li>
      <li class="nav-item">
        <a
          href="{% url 'signup' %}"
          title="Create an account"
          class="btn btn-outline-light me-2 nav-link text-light"
        >
          <i class="fa fa-user-plus"></i> Create Account</a
        >
      </li>
      {% else %}
      <li class="nav-item dropdown">
        <a
          class="nav-link dropdown-toggle btn btn-outline-light me-2 nav-link text-light"
          href="#"
          id="nav-migrations"
          role="button"
          data-bs-toggle="dropdown"
          aria-haspopup="true"
          aria-expanded="false"
        >
          Migrations
        </a>
        <div
          class="dropdown-menu dropdown-menu-end"
          aria-labelledby="nav-migrations-dropdown"
        > 
          <a
            href="{% url 'setup' %}"
            title="set up a new migration"
            class="dropdown-item"
            ><i class="fa fa-plus"></i> New Migration</a
          >
          <a
            href="{% url 'list-migrations' %}"
            title="view all of your migrations"
            class="dropdown-item"
            ><i class="fa fa-list"></i> View Migrations</a
          >
        </div>
      </li>
      <li class="nav-item dropdown">
        <a
          class="nav-link dropdown-toggle btn btn-outline-light me-2 nav-link text-light"
          href="#"
          id="nav-accounts-dropdown"
          role="button"
          data-bs-toggle="dropdown"
          aria-haspopup="true"
          aria-expanded="false"
        >
          {{user.username}}
        </a>
        <div
          class="dropdown-menu dropdown-menu-end"
          aria-labelledby="nav-accounts-dropdown"
        >
          {% if google_user %}
          <span class="dropdown-item">
            <i class="fa fa-brands fa-google"></i>
            {{google_user.email_address}}
          </span>
          {% endif %}
          <div class="dropdown-divider"></div>
          {% if m365_user %}
          <span class="dropdown-item">
            <i class="fa fa-brands fa-microsoft"></i>
            {{m365_user.email_address}}
          </span>
          {% endif %}
          <div class="dropdown-divider"></div>
          <a
            href="{% url 'logout' %}"
            title="log out of this application"
            class="dropdown-item"
            ><i class="fa fa-right-from-bracket"></i> Log Out</a
          >
        </div>
      </li>
      {% endif %}
    </ul>
  </div>
</nav>
